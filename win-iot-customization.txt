# winiot--custom-noobs
To make a custom version of NOOBS that will provide a way to create a factory restore feature for customized Windoes 10 IoT images.

This repo is created to try to make a custom version of NOOBS for Raspberri Pi that will implement a factory restore process to be used with customize commercial Windows 10 IoT images.

Based on the reading of NOOBS, this SHOULD work, but the resulting installation fails for some reason that I can't explain at the moment. Perhaps the community will notice a flaw and contribute.

I used:
1. Notepad++ or other editor that can maintain the unix line endings.
2. WinRAR or some other archiver program capable of extracting *.tar.xz files.
3. SD Association's Formatting Tool from https://www.sdcard.org/downloads/formatter_4/eula_windows/.

Here's what I discovered:

1. I download NOOBS_Lite from raspberrypi.org and extracted it to C:\WinIoT-NOOBS\.   
2. NOOBS has a hard coded routine that gets a list of operating systems from http://downloads.raspberrypi.org/os_list_v3.json. So I browsed that URL to retrieve the Windows IoT section. It begins with "os_name": "Windows 10 IoT Core".
3. I downloaded the files indicated for: icon, marketting_info, os_info, partitions_info, partition_setup and tarballs and copy them into "C:\WinIoT-NOOBS\os\Windows_IoT\".
4. I created a folder "C:\WinIoT-NOOBS\os\Windows_IoT\" and coped the downloaded files into that folder.
5. I used Notepad++ which is able to matintain Unix line endings when editing json and sh files.
6. I extracted the marketin.tar file into "C:\WinIoT-NOOBS\os\Windows_IoT\" which automaticallly created "C:\WinIoT-NOOBS\os\WinIoT\slides_vga\" with sevearl PNG files in it.
7. I downloaded the latest release version of Windows 10 IoT. I renamed it to "IOT Core RPi.ISO" and copied it to the os folder.
8. In the "partition_setup.sh" file I changed: IMAGE="/mnt/os/Windows_IoT/IOT Core RPi.ISO".
9. In the if..fi section that refers to DEBUG and InstallationPrecheck. I added '#' characters to the beginning of all those lines to comment them out. That section brings up a loader that asks you to download the release or insider version. We will not be downloading.
10. The next if..fi section downloads the version selected. You will see a comment about downloading the ISO and a "wget" command. I commented out all of this section too.
11. I changed the "Name": property to "My Windows 10 IoT Core Image" so that it is differentiated from the one NOOBS downloads if the RPi happens to be connected to the internet when it starts and downloads an entire list.
12. I opened all json and sh files and resaved them with unit line endings.
13. I prepared an SD card according the steps in the regular NOOBS distro.

